{"ast":null,"code":"var _jsxFileName = \"/Users/tpl5_2021h1/Desktop/Techtonica/Repos/Techtonica-Assignments/Animal-Sighting-Tracker/src/components/SightingsBoard.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState, useCallback } from \"react\";\nimport Sighting from \"./Sighting\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction SightingsBoard() {\n  _s();\n\n  const [tableData, setTable] = useState([]);\n  const [needsUpdate, updateSwitch] = useState(false);\n  var reducedTableData = [];\n\n  const fetchData = async () => {\n    try {\n      let res = await fetch(\"http://localhost:9000/sightings\");\n      let sightingResults = await res.json(); //console.log(sightingResults);\n\n      setTable(sightingResults);\n    } catch (e) {\n      alert(\"Error: Data not fetched!\", e);\n      console.log(\"Error: Data not fetched!\");\n    }\n  };\n\n  const groupedSightings = () => {\n    function alreadyIncluded(id) {\n      let check = false;\n      let i = 0;\n\n      while (check === false && (i === 0 || i < reducedTableData.length)) {\n        let arr = reducedTableData[i];\n\n        if (arr[0].sighting_id === id) {\n          check = true;\n        }\n      }\n\n      return check;\n    } //reducedTableData = [[{},{},{}], [{}], [{}, {}],]\n\n\n    tableData.forEach(sighting => {\n      //Groups sightings into array, pushes to reducedTableData\n      if (!alreadyIncluded(sighting.sighting_id)) {\n        reducedTableData.push(tableData.filter(subSighting => {\n          subSighting.sighting_id === sighting.sighting_id;\n        }));\n      }\n\n      ;\n    }); //reduce reducedTableData's subarrays\n\n    function reduceFurther(sightingObj, indexObj) {\n      sightingObj.individuals.push({\n        nickname: indexObj.nickname,\n        common_name: indexObj.common_name,\n        appeared_healthy: indexObj.appeared_healthy\n      });\n      return sightingObj;\n    }\n\n    ;\n    reducedtableData = reducedtableData.map(sightings => {\n      if (sightings.length > 1) {\n        let initialObject = {\n          date_time: sightings[0].date_time,\n          location: sightings[0].location,\n          sighter_email: sightings[0].sighter_email,\n          individuals: [{\n            nickname: sightings[0].sightings[0],\n            common_name: sightings[0].common_name,\n            appeared_healthy: sightings[0].appeared_healthy\n          }]\n        };\n        sightings.reduce(reduceFurther(), initialObject);\n      }\n\n      return sightings;\n    });\n  };\n\n  useEffect(() => {\n    fetchData();\n    groupedSightings();\n    updateSwitch(false);\n  }, [tableData]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"SightingsBoard\",\n    children: tableData ? tableData.map((item, index) => {\n      return /*#__PURE__*/_jsxDEV(Sighting, {\n        date: item.date_time,\n        individuals: item.individuals,\n        location: item.location,\n        sighter_email: item.sighter_email\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 20\n      }, this);\n    }) : /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Something went wrong... :c\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 11\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 89,\n    columnNumber: 5\n  }, this);\n}\n\n_s(SightingsBoard, \"+ClqjeCdv6RkkKXEo50vWE70RnM=\");\n\n_c = SightingsBoard;\nexport default SightingsBoard;\n\nvar _c;\n\n$RefreshReg$(_c, \"SightingsBoard\");","map":{"version":3,"sources":["/Users/tpl5_2021h1/Desktop/Techtonica/Repos/Techtonica-Assignments/Animal-Sighting-Tracker/src/components/SightingsBoard.js"],"names":["React","useEffect","useState","useCallback","Sighting","SightingsBoard","tableData","setTable","needsUpdate","updateSwitch","reducedTableData","fetchData","res","fetch","sightingResults","json","e","alert","console","log","groupedSightings","alreadyIncluded","id","check","i","length","arr","sighting_id","forEach","sighting","push","filter","subSighting","reduceFurther","sightingObj","indexObj","individuals","nickname","common_name","appeared_healthy","reducedtableData","map","sightings","initialObject","date_time","location","sighter_email","reduce","item","index"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useCallback } from \"react\";\nimport Sighting from \"./Sighting\";\n\nfunction SightingsBoard() {\n  const [tableData, setTable] = useState([]);\n  const [needsUpdate, updateSwitch] = useState(false);\n  var reducedTableData = [];\n\n  const fetchData = async () => {\n    try {\n      let res = await fetch(\"http://localhost:9000/sightings\");\n      let sightingResults = await res.json();\n      //console.log(sightingResults);\n\n      setTable(sightingResults);\n    } catch (e) {\n      alert(\"Error: Data not fetched!\", e);\n      console.log(\"Error: Data not fetched!\");\n    }\n  };\n\n  const groupedSightings = () => {\n\n    function alreadyIncluded(id){\n      let check = false;\n      let i = 0;\n      while(check === false && (i === 0 || i < reducedTableData.length) ){\n      let arr = reducedTableData[i];\n        if(arr[0].sighting_id === id){\n          check = true;\n        }\n      }\n      return check;\n    }\n\n    //reducedTableData = [[{},{},{}], [{}], [{}, {}],]\n    tableData.forEach((sighting) => {\n      \n      //Groups sightings into array, pushes to reducedTableData\n      if(!alreadyIncluded(sighting.sighting_id)){\n        reducedTableData.push( \n          tableData.filter(subSighting => {\n            subSighting.sighting_id === sighting.sighting_id\n          })\n        );\n      };\n    });\n\n    //reduce reducedTableData's subarrays\n    function reduceFurther(sightingObj, indexObj){\n\n      sightingObj.individuals.push(\n        { nickname:indexObj.nickname, \n          common_name: indexObj.common_name,\n          appeared_healthy:indexObj.appeared_healthy  }\n      );\n      \n      return sightingObj;\n    };\n\n    reducedtableData = reducedtableData.map((sightings) => {\n      if(sightings.length > 1){\n        let initialObject = {\n          date_time: sightings[0].date_time,\n          location: sightings[0].location,\n          sighter_email: sightings[0].sighter_email,\n          individuals: [\n            { nickname: sightings[0].sightings[0],\n              common_name: sightings[0].common_name,\n              appeared_healthy: sightings[0].appeared_healthy }\n          ]\n        };\n\n        sightings.reduce(reduceFurther(), initialObject);\n      }\n\n      return sightings;\n    });\n\n  };\n\n  useEffect(() => {\n    fetchData();\n    groupedSightings();\n    updateSwitch(false);\n  }, [tableData]);\n\n  return (\n    <div className=\"SightingsBoard\">\n      \n        {tableData ? (\n          tableData.map((item, index) => {\n            return <Sighting \n                    key={index} \n                    date={item.date_time} \n                    individuals={item.individuals}\n                    location={item.location} \n                    sighter_email={item.sighter_email} \n                    \n                    />;\n          })\n        ) : (\n          <p>Something went wrong... :c</p>\n          )}\n      \n    </div>\n  );\n}\n\nexport default SightingsBoard;\n"]},"metadata":{},"sourceType":"module"}